<?xml version="1.0" encoding="utf-8"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
<channel>
  <title>RSS</title>
  <atom:link href="/feed.xml" rel="self" type="application/rss+xml" />
  <link>/</link>
  <description>GitHub Discussions</description>
  <item>
  <title><![CDATA[关于 GG]]></title>
  <link>https://github.com/lencx/gg/discussions/4</link>
  <guid isPermaLink="false">https://github.com/lencx/gg/discussions/4</guid>
  <pubDate>2022-03-23</pubDate>
  <description><![CDATA[<blockquote>
<p dir="auto"><strong>GG: Gatsby + GitHub</strong></p>
</blockquote>
<h2 dir="auto">背景</h2>
<p dir="auto">我想要一个可以实时编辑文章的在线 IDE，支持分类，标签，多编程语言，评论互动及问答模式。发文也不需要受到平台的审核及约束，综合考虑下来决定基于 GitHub 来打造一个社区。同样的事情，我希望可以只用做一次，然后可以无限复用这种能力。所以我选择将它开源，并且完全基于 GitHub 所提供的能力来实现。</p>
<h2 dir="auto">技术栈</h2>
<ul dir="auto">
<li><a href="https://www.gatsbyjs.com/" rel="nofollow">Gatsby.js</a> - 一个基于 React 的免费、开源框架，用于帮助开发者构建运行速度极快的网站和应用程序</li>
<li><a href="https://github.com/lencx/rgd">lencx/rgd</a> - 一个命令行工具，可以将 GitHub Discussions API 生成 RSS 和 JSON 文件</li>
<li><a href="https://docs.github.com/en/graphql/guides/using-the-graphql-api-for-discussions">GitHub Discussions API</a> - 通过接口查询数据</li>
<li><a href="https://pages.github.com/">GitHub Pages</a> - 网站部署</li>
<li><a href="https://docs.github.com/en/actions/using-workflows/triggering-a-workflow">GitHub Actions workflow</a> - 定时任务，自动构建，及部署等</li>
<li><a href="https://web.dev/progressive-web-apps/" rel="nofollow">PWA</a> - 渐进式 Web 应用程序</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Responsive_Design" rel="nofollow">响应式</a> - 同时支持桌面端，及移动端</li>
</ul>
<h2 dir="auto">工作原理</h2>
<p dir="auto"><code>lencx/rgd</code> 从 <code>Discussions API</code> 中获取数据生成的 <code>JSON</code> 文件，会通过 <code>Gatsby.js</code> 的 <code>gatsby-transformer-json</code> 插件解析生成 <code>GraphQL</code> 数据作为网站数据源，用来渲染页面。<code>GitHub Actions</code> 每天会定时跑任务，从 <code>GitHub Discussions</code> 获取最新数据变更，重新对网站进行构建，并将其推送到 <code>GitHub Pages</code>。</p>
<h2 dir="auto">部署</h2>
<p dir="auto">这个项目推荐的方式是配合 <code>GitHub Actions</code> 每天定时同步 Discussions 中的数据，将其构建后推送到 <code>GitHub Pages</code>。但是您也可以选择部署到其他平台。需要进行如下步骤：</p>
<div class="highlight highlight-source-shell position-relative overflow-auto" data-snippet-clipboard-copy-content="yarn deploy"><pre>yarn deploy</pre></div>
<p dir="auto">将生成的 <code>public</code> 目录部署到其平台。</p>]]></description>
</item>
<item>
  <title><![CDATA[快速开始]]></title>
  <link>https://github.com/lencx/gg/discussions/5</link>
  <guid isPermaLink="false">https://github.com/lencx/gg/discussions/5</guid>
  <pubDate>2022-03-23</pubDate>
  <description><![CDATA[<h2 dir="auto">步骤</h2>
<h3 dir="auto">Step1：fork 项目</h3>
<p dir="auto"><a href="https://github.com/lencx/gg">点击项目</a> 右上角的 Fork 按钮</p>
<h3 dir="auto">Step2：开启 Discussions</h3>
<p dir="auto"><code>Repo -&gt; Settings -&gt; General -&gt; Features -&gt; Discussions</code></p>
<h3 dir="auto">Step3：创建配置</h3>
<p dir="auto">在 Discussions 中新增一个标题为 <code>rgd.yml</code> 的 issues，并在评论框中输入以下代码：</p>
<div class="highlight highlight-source-yaml position-relative overflow-auto" data-snippet-clipboard-copy-content="```yml
### repo
# github 用户名，支持个人或组织
owner: lencx
# github 仓库名称
repo: gg

### website
# 个人域名，如果没有则不需要设置
# 默认使用 github 二级域名，即 https://&lt;owner&gt;.github.io/&lt;repo&gt;
cname: gg.nofwl.com
# 1. 格式为 png 的 240x240 正方形图片
# 2. 在线图片 URL 地址，不设置则使用默认 logo
logo: https://avatars.githubusercontent.com/u/16164244?v=4
# 网站标题
title: Gatsby GitHub Template
# 网站描述
description: A gatsby website builder based on github discussions

### PWA Manifest
# https://www.gatsbyjs.com/plugins/gatsby-plugin-manifest
manifest:
  name: GG
  short_name: GG
  start_url: /
  background_color: '#fafafa'
  theme_color: '#232629'
  display: standalone
  # 1. 格式为 png 的 240x240 正方形图片
  # 2. 在线图片 URL 地址，不设置则使用默认 logo
  icon: https://avatars.githubusercontent.com/u/16164244?v=4
```"><pre><span class="pl-s"><span class="pl-pds">`</span><span class="pl-pds">`</span><span class="pl-pds">`</span>yml</span>
<span class="pl-s">### repo</span>
<span class="pl-s"># github 用户名，支持个人或组织</span>
<span class="pl-s">owner: lencx</span>
<span class="pl-s"># github 仓库名称</span>
<span class="pl-s">repo: gg</span>
<span class="pl-s"></span>
<span class="pl-s">### website</span>
<span class="pl-s"># 个人域名，如果没有则不需要设置</span>
<span class="pl-s"># 默认使用 github 二级域名，即 https://&lt;owner&gt;.github.io/&lt;repo&gt;</span>
<span class="pl-s">cname: gg.nofwl.com</span>
<span class="pl-s"># 1. 格式为 png 的 240x240 正方形图片</span>
<span class="pl-s"># 2. 在线图片 URL 地址，不设置则使用默认 logo</span>
<span class="pl-s">logo: https://avatars.githubusercontent.com/u/16164244?v=4</span>
<span class="pl-s"># 网站标题</span>
<span class="pl-s">title: Gatsby GitHub Template</span>
<span class="pl-s"># 网站描述</span>
<span class="pl-s">description: A gatsby website builder based on github discussions</span>
<span class="pl-s"></span>
<span class="pl-s">### PWA Manifest</span>
<span class="pl-s"># https://www.gatsbyjs.com/plugins/gatsby-plugin-manifest</span>
<span class="pl-s">manifest:</span>
<span class="pl-s">  name: GG</span>
<span class="pl-s">  short_name: GG</span>
<span class="pl-s">  start_url: /</span>
<span class="pl-s">  background_color: '#fafafa'</span>
<span class="pl-s">  theme_color: '#232629'</span>
<span class="pl-s">  display: standalone</span>
<span class="pl-s">  # 1. 格式为 png 的 240x240 正方形图片</span>
<span class="pl-s">  # 2. 在线图片 URL 地址，不设置则使用默认 logo</span>
<span class="pl-s">  icon: https://avatars.githubusercontent.com/u/16164244?v=4</span>
<span class="pl-s"><span class="pl-pds">`</span><span class="pl-pds">`</span><span class="pl-pds">`</span></span></pre></div>
<h3 dir="auto">Step4：生成 Token</h3>
<p dir="auto"><a href="https://github.com/settings/tokens">生成 Token</a></p>
<p dir="auto">New personal access token</p>
<ol dir="auto">
<li><code>Note</code> - 备注随便输入，主要做标识</li>
<li><code>Expiration：No expiration</code> - 过期时间看需要，这里选择不过期</li>
<li><code>Select scopes: workflow</code> - 只需要勾选 <code>workflow</code></li>
<li>点击 <code>Generate token</code> 按钮，然后复制生成好的 <code>Token</code></li>
</ol>
<h3 dir="auto">Step5：设置 Secrets</h3>
<p dir="auto"><code>Repo -&gt; Settings -&gt; Secrets -&gt; Actions -&gt; New repository secret</code></p>
<p dir="auto">需要添加三个变量：</p>
<ol dir="auto">
<li>GH_TOKEN
<ul dir="auto">
<li>Name: <code>GH_TOKEN</code></li>
<li>Value: <code>Step4 生成好的 GitHub Token</code></li>
</ul>
</li>
<li>GG_USER
<ul dir="auto">
<li>Name: <code>GG_USER</code></li>
<li>Value: <code>GitHub 用户名或组织</code></li>
</ul>
</li>
<li>GG_REPO
<ul dir="auto">
<li>Name: <code>GG_REPO</code></li>
<li>Value: <code>GitHub 仓库名</code></li>
</ul>
</li>
</ol>
<h2 dir="auto">构建</h2>
<ul dir="auto">
<li>提交代码会触发构建（🙅🏻‍♂️不推荐，会和上游仓库产生冲突，无法拉取最新代码）</li>
<li>每隔一小时会自动构建一次（💁🏻‍♂️ 默认，首次创建仓库需要先启用 workflow）</li>
<li>手动触发构建（🙋🏻‍♂️ 想要部署到网站预览，可以点击 <code>Re-run all jobs</code> 按钮来部署）</li>
</ul>
<p dir="auto">手动触发构建需要在 Fork 项目后，点击 <code>Actions</code> Tab 项，在 <code>All workflows</code> 中选择 <code>github pages</code>，<em>点击 <code>Enable workflow</code></em>，当构建过一次之后，会在 <code>github pages</code> 下产生记录，点击最新一条记录，会看到 <code>Re-run all jobs</code> 按钮，点击它就可以手动进行部署了。</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/16164244/159691189-ea7c88ea-c0a7-49ba-8128-3da2648a8d1e.png"><img width="680" alt="enable workflow" src="https://user-images.githubusercontent.com/16164244/159691189-ea7c88ea-c0a7-49ba-8128-3da2648a8d1e.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/16164244/159640201-9a8b6229-861e-4664-8ff8-0b8438c19cf8.png"><img width="680" alt="workflow" src="https://user-images.githubusercontent.com/16164244/159640201-9a8b6229-861e-4664-8ff8-0b8438c19cf8.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/16164244/159640200-19d25bad-0b14-4a69-a547-e9584125074c.png"><img width="680" alt="workflow" src="https://user-images.githubusercontent.com/16164244/159640200-19d25bad-0b14-4a69-a547-e9584125074c.png" style="max-width: 100%;"></a></p>]]></description>
</item>
<item>
  <title><![CDATA[rgd.yml]]></title>
  <link>https://github.com/lencx/gg/discussions/2</link>
  <guid isPermaLink="false">https://github.com/lencx/gg/discussions/2</guid>
  <pubDate>2022-03-23</pubDate>
  <description><![CDATA[<div class="highlight highlight-source-yaml position-relative overflow-auto" data-snippet-clipboard-copy-content="### repo ###
owner: lencx
repo: gg

### website ###
# domain name
cname: gg.nofwl.com
# size: 240x240
# logo: https://avatars.githubusercontent.com/u/16164244?v=4
title: Gatsby GitHub Template
description: A gatsby website builder based on github discussions

### PWA Manifest ###
manifest:
  name: GG
  short_name: GG
  start_url: /
  background_color: &quot;#fafafa&quot;
  theme_color: &quot;#232629&quot;
  display: standalone
  # icon: https://avatars.githubusercontent.com/u/16164244?v=4"><pre><span class="pl-c"><span class="pl-c">#</span>## repo ###</span>
<span class="pl-ent">owner</span>: <span class="pl-s">lencx</span>
<span class="pl-ent">repo</span>: <span class="pl-s">gg</span>

<span class="pl-c"><span class="pl-c">#</span>## website ###</span>
<span class="pl-c"><span class="pl-c">#</span> domain name</span>
<span class="pl-ent">cname</span>: <span class="pl-s">gg.nofwl.com</span>
<span class="pl-c"><span class="pl-c">#</span> size: 240x240</span>
<span class="pl-c"><span class="pl-c">#</span> logo: https://avatars.githubusercontent.com/u/16164244?v=4</span>
<span class="pl-ent">title</span>: <span class="pl-s">Gatsby GitHub Template</span>
<span class="pl-ent">description</span>: <span class="pl-s">A gatsby website builder based on github discussions</span>

<span class="pl-c"><span class="pl-c">#</span>## PWA Manifest ###</span>
<span class="pl-ent">manifest</span>:
  <span class="pl-ent">name</span>: <span class="pl-s">GG</span>
  <span class="pl-ent">short_name</span>: <span class="pl-s">GG</span>
  <span class="pl-ent">start_url</span>: <span class="pl-s">/</span>
  <span class="pl-ent">background_color</span>: <span class="pl-s"><span class="pl-pds">"</span>#fafafa<span class="pl-pds">"</span></span>
  <span class="pl-ent">theme_color</span>: <span class="pl-s"><span class="pl-pds">"</span>#232629<span class="pl-pds">"</span></span>
  <span class="pl-ent">display</span>: <span class="pl-s">standalone</span>
  <span class="pl-c"><span class="pl-c">#</span> icon: https://avatars.githubusercontent.com/u/16164244?v=4</span></pre></div>]]></description>
</item>
<item>
  <title><![CDATA[test]]></title>
  <link>https://github.com/lencx/gg/discussions/3</link>
  <guid isPermaLink="false">https://github.com/lencx/gg/discussions/3</guid>
  <pubDate>2022-03-23</pubDate>
  <description><![CDATA[<p dir="auto">test</p>]]></description>
</item>
<item>
  <title><![CDATA[Welcome to GG Discussions!]]></title>
  <link>https://github.com/lencx/gg/discussions/1</link>
  <guid isPermaLink="false">https://github.com/lencx/gg/discussions/1</guid>
  <pubDate>2022-03-23</pubDate>
  <description><![CDATA[
<h2 dir="auto"><g-emoji class="g-emoji" alias="wave" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f44b.png">👋</g-emoji> Welcome!</h2>
<p dir="auto">We’re using Discussions as a place to connect with other members of our community. We hope that you:</p>
<ul dir="auto">
<li>Ask questions you’re wondering about.</li>
<li>Share ideas.</li>
<li>Engage with other community members.</li>
<li>Welcome others and are open-minded. Remember that this is a community we<br>
build together <g-emoji class="g-emoji" alias="muscle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4aa.png">💪</g-emoji>.</li>
</ul>
<p dir="auto">To get started, comment below with an introduction of yourself and tell us about what you do with this community.</p>
]]></description>
</item>

</channel>
</rss>